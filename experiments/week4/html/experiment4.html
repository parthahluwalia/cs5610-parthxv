<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Angular JS App</title>
    <link rel="stylesheet" href="../../../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../../../css/bootstrap-theme.min.css" />
    <script src="../../../javascript/angular.min.js"></script>
    <script src="../../../javascript/angular.min.js.map"></script>
    <script type="text/javascript" src="../js/experiment4.js"></script>
</head>
<body ng-app="TVShowsApp">
    <div class="jumbotron">
        <h1 class="text-center">A Simple TV Maze App</h1>
    </div>

    <div ng-controller="TVShowsController" class="container">

        <h2>Search TV Shows</h2>
        <div class="input-group">
            <input type="text" class="form-control" ng-model="searchByTitle" placeholder="Enter a TV show" />
            <button ng-click="searchTVShows()" class="btn btn-default" >Go!</button>
        </div>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Premier Date</th>
                    <th>Rating</th>
                    <th>Summary</th>
                    <th>&nbsp;</th>
                </tr>
                <tr>
                    <th> <input type="text" class="form-control" ng-model="tvShow.show.name" /> </th>
                    <th> <input type="text" class="form-control" ng-model="tvShow.show.premiered" /> </th>
                    <th> <input type="text" class="form-control" ng-model="tvShow.show.rating.average" /> </th>
                    <th> <input type="text" class="form-control" ng-model="tvShow.show.summary" /> </th>
                    <th> 
                        <button class="btn btn-success" ng-click="addTVShow()">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button> 
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="tvShow in tvShows">
                    <td>{{tvShow.show.name}}</td>
                    <td>{{tvShow.show.premiered}}</td>
                    <td> {{tvShow.show.rating.average}}</td>
                    <!--<td><img ng-src="{{tvShow.show.image.medium}}" width="80" height="80" /></td>-->
                    <td>{{tvShow.show.summary}}</td>
                    <td> 
                        <button class="btn btn-danger" ng-click="removeTVShow(tvShow)">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="container">
        <h2>About the experiment</h2>
        <hr />
        <p>
            This experiment combines the use of Angular JS and Web APIs to demonstrate how Angular JS binds the 
            Model, View and Controller components of a page.
        </p>
        <p>
            The expeirment utilizes the TV Maze API to get the HTTP response (by making a get request) when user enters 
            a TV show in the respective input field. Upon getting the response, a user may further customize the result 
            by adding another TV show by entering the details in the respective input fields at the table header. A user may 
            also remove a TV show by clicking the coressponding "remove" button.
        </p>

        <h2>Code Snippet</h2>
        <hr />
        <p>
            Below is the function that is being used to make a get request to the TV Maze API. The error handling is done by the error method.
        <pre>$scope.searchTVShows = function () {
        var title = $scope.searchByTitle;
        $http.get("http://api.tvmaze.com/search/shows?q=" + title)
            .success(function (response) {
                console.log(response);
                $scope.tvShows = response;
            })
            .error(function (data) {
                console.log("Error while sending request");
            });
    };</pre>
        </p>

        <h2>Source Code</h2>
        <hr />
        <ul>
            <li><a class="link" href="../../../fileview/Default.aspx?~/experiments/week4/html/experiment4.html">View HTML Source</a></li>
            <li><a class="link" href="../../../fileview/Default.aspx?~/experiments/week4/js/experiment4.js">View JavaScript Source</a></li>
        </ul>

        <h2>References</h2>
        <hr />
        <a href="https://www.youtube.com/watch?v=Kan1sMNOlIc">Jose Annunziato</a>
        <hr />
    </div>
</body>
</html>
