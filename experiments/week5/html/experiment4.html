<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Weather App</title>
    <link rel="stylesheet" href="../../../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../../../css/bootstrap-theme.min.css" />
    <script src="../../../javascript/angular.min.js"></script>
    <script src="../../../javascript/angular-route.min.js"></script>
    <script src="../js/experiment4.js"></script>
    <script src="../js/exp3-service.js"></script>
</head>
<body ng-app="WeatherApp">
    <div class="container">
        <div class="header">
            <nav ng-controller="NavCtrl">
                <ul class="nav nav-pills pull-right">
                    <li role="presentation" class="active"><a href="#/home">Home</a></li>
                    <li role="presentation"><a href="#/savedWeather">Saved Weather</a></li>
                    <li role="presentation" ng-show="currentUser"><a href="#/profile/{{currentUser.username}}">Profile</a></li>
                    <li role="presentation" ng-show="currentUser" ng-click="logout()"><a href="#/home">Logout</a></li>
                </ul>
                <form class="navbar-form navbar-right nav-pills pull-right" ng-show="!currentUser">
                    <div class="form-group">
                        <input ng-model="username" type="text" placeholder="Username: rishi" class="form-control">
                    </div>
                    <div class="form-group">
                        <input ng-model="password" type="password" placeholder="Password: duggal" class="form-control">
                    </div>
                    <button role="presentation" class="active btn-success" ng-click="login()">Sign in</button>&nbsp;&nbsp;&nbsp;&nbsp;
                </form>
            </nav>
            <h3 class="text-muted">Weather App</h3>
            <hr />

            <div class="jumbotron">
                <h1 class="text-center">Weather App - Login / Logout Functionality in AngularJS</h1>
            </div>
        </div>

        <div ng-view>
        </div>

    </div>

    <br /><br />
    <br /><br />
    <br /><br />

    <div class="container">
        <h2>About the experiment</h2>
        <hr />
        <p>
            This experiment extends the Weather app to inculde Login and Logout functionality using AngularJS.
        </p>
        <p>
            A user can login by entering the valid credentials in the navigation bar. In order to achieve this 
            functionality, another service has been created - userService - where functions have been written to 
            sign in sign out a user.
        </p>
        <p>
            <h4>Login Details:</h4>
            Username: rishi<br />
            Password: duggal
        </p>
        <h2>Code Snippet</h2>
        <hr />
        <p>
            Below is the function that is being used to implement this functionality:
        <pre>var login = function (username, password) {
        for (var i in users) {
            if (users[i].username === username) {
                currentUser = users[i];
                return users[i];
            }
        }
        
        return null;
    }
    var getCurrentUser = function () {
        return currentUser;
    }
    var logout = function () {
        currentUser = null;
    }</pre>
        </p>

        <h2>Source Code</h2>
        <hr />
        <ul>
            <li><a class="link" href="../../../fileview/Default.aspx?~/experiments/week5/html/experiment4.html">View HTML Source</a></li>
            <li><a class="link" href="../../../fileview/Default.aspx?~/experiments/week5/weather/home.html">Home</a></li>
            <li><a class="link" href="../../../fileview/Default.aspx?~/experiments/week5/weather/profile.html">Profile</a></li>
            <li><a class="link" href="../../../fileview/Default.aspx?~/experiments/week5/weather/savedWeather2.html">Saved Weather</a></li>
            <li><a class="link" href="../../../fileview/Default.aspx?~/experiments/week5/js/experiment4.js">View JavaScript Source</a></li>
            <li><a class="link" href="../../../fileview/Default.aspx?~/experiments/week5/js/exp3-service.js">View Services</a></li>
        </ul>

        <h2>References</h2>
        <hr />
        <a href="https://www.youtube.com/watch?v=Kan1sMNOlIc">Jose Annunziato</a>
        <hr />
    </div>

</body>
</html>
