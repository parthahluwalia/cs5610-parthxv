<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Weather App</title>
    <link rel="stylesheet" href="../../../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../../../css/bootstrap-theme.min.css" />
    <script src="../../../javascript/angular.min.js"></script>
    <script src="../../../javascript/angular-route.min.js"></script>
    <script src="../js/experiment3.js"></script>
    <script src="../js/exp3-service.js"></script>
</head>
<body ng-app="WeatherApp">
    <div class="container">
        <div class="header">
            <nav>
                <ul class="nav nav-pills pull-right">
                    <li role="presentation" class="active"><a href="#/home">Home</a></li>
                    <li role="presentation"><a href="#/savedWeather">Saved Weather</a></li>
                </ul>
            </nav>
            <h3 class="text-muted">Weather App</h3>
            <hr />

            <div class="jumbotron">
                <h1 class="text-center">Weather Forecast App</h1>
            </div>
        </div>

        <div ng-view>
        </div>

    </div>

    <div class="container">
        <h2>About the experiment</h2>
        <hr />
        <p>
            The expeirment utilizes the WeatherOnline API to get the HTTP response (by making a get request) when user enters 
            a location in the respective input field and selects the number of days for which he wants to see the weather. Upon getting the response, a user may save the results 
            clicking on the save button. The saved weather reports can be viewed by the user by navigating to the Saved Weather link.
        </p>
        <p>
            A separate service - weatherService - has been created here to provide functions like get weather and save weather, which is then consumed by the controller.
        </p>

        <h2>Code Snippet</h2>
        <hr />
        <p>
            Below is the function that is being used to make a get request to the TV Maze API. The error handling is done by the error method.
        <pre>weatherApp.factory('weatherService', function weatherService($http) {
    var getWeather = function (location, numOfDays, callback) {
        $http.get("http://api.worldweatheronline.com/free/v2/weather.ashx?key=d85a78bff4cd92f19e843c552014b&q=" + location + "&num_of_days=" + numOfDays + "&format=json")
            .success(callback)
            .error(function (data) {
                console.log("Error while connecting");
            });
    };
    var savedWeather = [];
    var saveWeather = function (day) {
        savedWeather.push(day);
    };
    var getSavedWeather = function () {
        return savedWeather;
    };
    //This is to be done because of closure concept in JavaScript
    return {
        getWeather: getWeather,
        saveWeather: saveWeather,
        getSavedWeather: getSavedWeather
    };
});</pre>
        </p>

        <h2>Source Code</h2>
        <hr />
        <ul>
            <li><a class="link" href="../../../fileview/Default.aspx?~/experiments/week5/html/experiment3.html">View HTML Source</a></li>
            <li><a class="link" href="../../../fileview/Default.aspx?~/experiments/week5/js/experiment3.js">View JavaScript Source</a></li>
            <li><a class="link" href="../../../fileview/Default.aspx?~/experiments/week5/js/exp3-service.js">View JavaScript Source</a></li>
        </ul>

        <h2>References</h2>
        <hr />
        <a href="https://www.youtube.com/watch?v=Kan1sMNOlIc">Jose Annunziato</a>
        <hr />
    </div>
-->

</body>
</html>
